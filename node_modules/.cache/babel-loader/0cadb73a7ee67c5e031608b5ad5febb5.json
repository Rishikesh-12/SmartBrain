{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Circle_1 = require(\"../../../../Utils/Circle\");\n\nvar Infecter = function () {\n  function Infecter() {}\n\n  Infecter.infect = function (p1, container, delta) {\n    var _a, _b;\n\n    p1.updateInfection(delta);\n\n    if (p1.infectionStage === undefined) {\n      return;\n    }\n\n    var options = container.options;\n    var infectionOptions = options.infection;\n\n    if (!infectionOptions.enable || infectionOptions.stages.length < 1) {\n      return;\n    }\n\n    var infectionStage1 = infectionOptions.stages[p1.infectionStage];\n    var pxRatio = container.retina.pixelRatio;\n    var radius = p1.size.value * 2 + infectionStage1.radius * pxRatio;\n    var pos = p1.getPosition();\n    var infectedStage1 = (_a = infectionStage1.infectedStage) !== null && _a !== void 0 ? _a : p1.infectionStage;\n    var query = container.particles.quadTree.query(new Circle_1.Circle(pos.x, pos.y, radius)).filter(function (t) {\n      return t.infectionStage === undefined || t.infectionStage !== p1.infectionStage;\n    });\n    var infections = infectionStage1.rate;\n    var neighbors = query.length;\n\n    for (var _i = 0, query_1 = query; _i < query_1.length; _i++) {\n      var p2 = query_1[_i];\n\n      if (Math.random() < infections / neighbors) {\n        if (p2.infectionStage === undefined) {\n          p2.startInfection(infectedStage1);\n        } else if (p2.infectionStage < p1.infectionStage) {\n          p2.updateInfectionStage(infectedStage1);\n        } else if (p2.infectionStage > p1.infectionStage) {\n          var infectionStage2 = infectionOptions.stages[p2.infectionStage];\n          var infectedStage2 = (_b = infectionStage2 === null || infectionStage2 === void 0 ? void 0 : infectionStage2.infectedStage) !== null && _b !== void 0 ? _b : p2.infectionStage;\n          p1.updateInfectionStage(infectedStage2);\n        }\n      }\n    }\n  };\n\n  return Infecter;\n}();\n\nexports.Infecter = Infecter;","map":{"version":3,"sources":["/home/rishikesh/Desktop/wd/SmartBrain/node_modules/tsparticles/dist/Core/Particle/Interactions/Particles/Infecter.js"],"names":["Object","defineProperty","exports","value","Circle_1","require","Infecter","infect","p1","container","delta","_a","_b","updateInfection","infectionStage","undefined","options","infectionOptions","infection","enable","stages","length","infectionStage1","pxRatio","retina","pixelRatio","radius","size","pos","getPosition","infectedStage1","infectedStage","query","particles","quadTree","Circle","x","y","filter","t","infections","rate","neighbors","_i","query_1","p2","Math","random","startInfection","updateInfectionStage","infectionStage2","infectedStage2"],"mappings":"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","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Circle_1 = require(\"../../../../Utils/Circle\");\nvar Infecter = (function () {\n    function Infecter() {\n    }\n    Infecter.infect = function (p1, container, delta) {\n        var _a, _b;\n        p1.updateInfection(delta);\n        if (p1.infectionStage === undefined) {\n            return;\n        }\n        var options = container.options;\n        var infectionOptions = options.infection;\n        if (!infectionOptions.enable || infectionOptions.stages.length < 1) {\n            return;\n        }\n        var infectionStage1 = infectionOptions.stages[p1.infectionStage];\n        var pxRatio = container.retina.pixelRatio;\n        var radius = p1.size.value * 2 + infectionStage1.radius * pxRatio;\n        var pos = p1.getPosition();\n        var infectedStage1 = (_a = infectionStage1.infectedStage) !== null && _a !== void 0 ? _a : p1.infectionStage;\n        var query = container.particles.quadTree.query(new Circle_1.Circle(pos.x, pos.y, radius))\n            .filter(function (t) { return t.infectionStage === undefined || t.infectionStage !== p1.infectionStage; });\n        var infections = infectionStage1.rate;\n        var neighbors = query.length;\n        for (var _i = 0, query_1 = query; _i < query_1.length; _i++) {\n            var p2 = query_1[_i];\n            if (Math.random() < infections / neighbors) {\n                if (p2.infectionStage === undefined) {\n                    p2.startInfection(infectedStage1);\n                }\n                else if (p2.infectionStage < p1.infectionStage) {\n                    p2.updateInfectionStage(infectedStage1);\n                }\n                else if (p2.infectionStage > p1.infectionStage) {\n                    var infectionStage2 = infectionOptions.stages[p2.infectionStage];\n                    var infectedStage2 = (_b = infectionStage2 === null || infectionStage2 === void 0 ? void 0 : infectionStage2.infectedStage) !== null && _b !== void 0 ? _b : p2.infectionStage;\n                    p1.updateInfectionStage(infectedStage2);\n                }\n            }\n        }\n    };\n    return Infecter;\n}());\nexports.Infecter = Infecter;\n"]},"metadata":{},"sourceType":"script"}